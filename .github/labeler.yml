# Label configuration for PR auto-labeling
# See: https://github.com/actions/labeler

# ================================
# Documentation Labels
# ================================
documentation:
  - changed-files:
    - any-glob-to-any-file: ['**/*.md', 'docs/**/*']

ğŸ“– documentation:
  - changed-files:
    - any-glob-to-any-file: ['**/*.md', 'docs/**/*']

ğŸ“ docs:readme:
  - changed-files:
    - any-glob-to-any-file: ['README.md', 'CONTRIBUTING.md', 'CHANGELOG.md']

ğŸ“ docs:architecture:
  - changed-files:
    - any-glob-to-any-file: ['docs/architecture/**/*', 'docs/diagrams/**/*']

ğŸ”— docs:api:
  - changed-files:
    - any-glob-to-any-file: ['docs/api/**/*']

ğŸ“š docs:ex_doc:
  - changed-files:
    - any-glob-to-any-file: ['lib/**/*.ex']

# ================================
# CI/CD and DevOps Labels
# ================================
ci/cd:
  - changed-files:
    - any-glob-to-any-file: ['.github/**/*', 'docker/**/*']

âš¡ devops:ci-cd:
  - changed-files:
    - any-glob-to-any-file: ['.github/workflows/**/*']

ğŸ³ devops:docker:
  - changed-files:
    - any-glob-to-any-file: ['docker/Dockerfile', 'docker/**/*', 'docker/docker-compose*.yml', '.dockerignore']

ğŸ“œ devops:scripts:
  - changed-files:
    - any-glob-to-any-file: ['scripts/**/*', '**/*.sh']

â˜¸ï¸ devops:kubernetes:
  - changed-files:
    - any-glob-to-any-file: ['k8s/**/*', 'kubernetes/**/*', 'helm/**/*', 'manifests/**/*']

# ================================
# Source Code Changes
# ================================
feature:
  - changed-files:
    - any-glob-to-any-file: ['lib/**/*.ex', '!test/**/*']

# ================================
# Testing Labels
# ================================
tests:
  - changed-files:
    - any-glob-to-any-file: ['test/**/*']

ğŸ§ª tests:unit:
  - changed-files:
    - any-glob-to-any-file: ['test/**/*_test.exs', '!test/integration/**/*', '!test/**/e2e/**/*']

ğŸ”¬ tests:e2e:
  - changed-files:
    - any-glob-to-any-file: ['test/e2e/**/*', 'test/**/*_e2e_test.exs']

ğŸ¯ tests:integration:
  - changed-files:
    - any-glob-to-any-file: ['test/integration/**/*']

ğŸ­ tests:factory:
  - changed-files:
    - any-glob-to-any-file: ['test/support/factory.ex', 'test/support/factories/**/*']

# ================================
# Configuration Labels
# ================================
config:
  - changed-files:
    - any-glob-to-any-file: ['*.json', '*.yml', '*.yaml', '.env*', 'config/**/*', '!.github/**/*']

âš™ï¸ config:
  - changed-files:
    - any-glob-to-any-file: ['config/**/*', '.env*']

# ================================
# Dependencies Labels
# ================================
dependencies:
  - changed-files:
    - any-glob-to-any-file: ['mix.exs', 'mix.lock']

# ================================
# Database Labels
# ================================
database:
  - changed-files:
    - any-glob-to-any-file: ['priv/repo/migrations/**/*', 'lib/**/messages/*.ex', 'lib/**/conversations/*.ex']

ğŸ—„ï¸ database:ecto:
  - changed-files:
    - any-glob-to-any-file: ['lib/**/messages/*.ex', 'lib/**/conversations/*.ex', 'lib/**/repo.ex', 'priv/repo/migrations/**/*']

ğŸ—„ï¸ database:postgresql:
  - changed-files:
    - any-glob-to-any-file: ['priv/repo/migrations/**/*', 'config/config.exs']

ğŸ—„ï¸ type:database:
  - changed-files:
    - any-glob-to-any-file: ['priv/repo/migrations/**/*', 'lib/**/messages/*.ex', 'lib/**/conversations/*.ex']

# ================================
# Security Labels
# ================================
ğŸ”’ type:security:
  - changed-files:
    - any-glob-to-any-file: ['**/auth/**/*', 'lib/**/plugs/**/*', 'lib/**/guardian/**/*']

# ================================
# Messaging Service Specific Labels
# ================================

# Messaging Core
ğŸ’¬ messaging:core:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages.ex', 'lib/whispr_messaging/messages/**/*']

# Conversations
ğŸ—¨ï¸ conversations:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/conversations.ex', 'lib/whispr_messaging/conversations/**/*', 'lib/whispr_messaging/conversation_server.ex', 'lib/whispr_messaging/conversation_supervisor.ex']

# Phoenix Channels
ğŸ“¡ channels:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/channels/**/*']

# Presence
ğŸ‘¥ presence:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/channels/presence.ex']

# gRPC Communication
ğŸ”— grpc:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_grpc/**/*', 'priv/protos/**/*', '**/*.proto']

# Monitoring
ğŸ“Š monitoring:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/controllers/health_controller.ex', 'lib/**/telemetry/**/*']

# Redis Cache
ğŸ’¾ cache:redis:
  - changed-files:
    - any-glob-to-any-file: ['lib/**/cache/**/*', 'config/config.exs']

# Phoenix PubSub
ğŸ”Œ pubsub:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/application.ex', 'config/config.exs']

# Message Attachments
ğŸ“ attachments:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages/message_attachment.ex']

# Message Reactions
ğŸ˜Š reactions:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages/message_reaction.ex']

# Delivery Status
âœ… delivery-status:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages/delivery_status.ex']

# ================================
# Phoenix Framework Labels
# ================================
ğŸ”¥ phoenix:endpoint:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/endpoint.ex', 'lib/whispr_messaging_grpc/endpoint.ex']

ğŸ”¥ phoenix:router:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/router.ex']

ğŸ”¥ phoenix:live-view:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/live/**/*']

ğŸ”¥ phoenix:controllers:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/controllers/**/*']

# ================================
# Elixir/OTP Labels
# ================================
âš—ï¸ elixir:genserver:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/conversation_server.ex', 'lib/**/server.ex']

âš—ï¸ elixir:supervisor:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/conversation_supervisor.ex', 'lib/whispr_messaging/application.ex', 'lib/**/supervisor.ex']

âš—ï¸ elixir:process:
  - changed-files:
    - any-glob-to-any-file: ['lib/**/server.ex', 'lib/**/worker.ex']

âš—ï¸ elixir:otp:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/application.ex', 'lib/**/supervisor.ex', 'lib/**/server.ex']

# ================================
# Real-time Features Labels
# ================================
âš¡ realtime:websocket:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/channels/user_socket.ex', 'lib/whispr_messaging_web/endpoint.ex']

âš¡ realtime:broadcast:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/channels/**/*', 'lib/whispr_messaging/conversation_server.ex']

âš¡ realtime:sync:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/conversation_server.ex', 'lib/whispr_messaging_web/channels/**/*']

ğŸ‘ï¸ typing-indicator:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging_web/channels/conversation_channel.ex', 'lib/whispr_messaging_web/channels/presence.ex']

# ================================
# Message Features Labels
# ================================
ğŸ“ message:text:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages/message.ex']

ğŸ“¸ message:media:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages/message_attachment.ex']

ğŸ“ message:files:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages/message_attachment.ex']

ğŸ”„ message:edit:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages.ex', 'lib/whispr_messaging/messages/message.ex']

ğŸ—‘ï¸ message:delete:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages.ex', 'lib/whispr_messaging/messages/message.ex']

ğŸ” message:search:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/messages.ex']

# ================================
# Code Quality Labels
# ================================
âœ¨ quality:credo:
  - changed-files:
    - any-glob-to-any-file: ['.credo.exs']

ğŸ” quality:dialyzer:
  - changed-files:
    - any-glob-to-any-file: ['lib/**/*.ex']

ğŸ›¡ï¸ quality:sobelow:
  - changed-files:
    - any-glob-to-any-file: ['.sobelow-conf']

# ================================
# Istio Service Mesh Labels
# ================================
ğŸ” istio:mtls:
  - changed-files:
    - any-glob-to-any-file: ['k8s/**/mtls/**/*', 'istio/**/*', 'k8s/**/peerauthentication.yaml']

ğŸŒ istio:traffic:
  - changed-files:
    - any-glob-to-any-file: ['k8s/**/virtualservice.yaml', 'k8s/**/destinationrule.yaml']

ğŸ“¡ istio:telemetry:
  - changed-files:
    - any-glob-to-any-file: ['k8s/**/telemetry/**/*', 'k8s/**/metrics/**/*']

# ================================
# Performance Labels
# ================================
âš¡ performance:
  - changed-files:
    - any-glob-to-any-file: ['lib/**/cache/**/*', 'config/prod.exs']

ğŸš€ scalability:
  - changed-files:
    - any-glob-to-any-file: ['lib/whispr_messaging/conversation_supervisor.ex', 'lib/whispr_messaging/application.ex']

â±ï¸ latency:
  - changed-files:
    - any-glob-to-any-file: ['lib/**/telemetry/**/*', 'lib/**/cache/**/*']
